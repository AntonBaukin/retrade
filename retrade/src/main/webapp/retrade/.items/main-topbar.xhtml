<?xml version = '1.0' encoding = 'UTF-8'?>

<ui:component xmlns:ui = 'http://java.sun.com/jsf/facelets'
  xmlns:c  = 'http://java.sun.com/jsp/jstl/core'
  xmlns:f  = 'http://java.sun.com/jsf/core'
  xmlns:x  = 'http://java.sun.com/jsf/composite/.xhtml'
  xmlns:z  = 'uri:tverts.com'>

  <!-- [application main topbar -->

  <x:component coid = "${z:vid(localView, 'main_topbar')}">

    <f:facet name = "extjs-props">

      region: 'north', frame: false, border:false,
      margin: extjsf.dpts(0, 2, 0, 2), height: 35,
      bodyCls: 'retrade-desktop-panel-topbar retrade-transparent-panel',
      layout: {type: 'hbox', align: 'middle'}

    </f:facet>


    <!-- [retrade main menu -->

    <x:component coid = "${z:vid(localView, 'retrade-main-menu-button')}">

      <f:facet name = "extjs-props">

        xtype: 'button', flex: 0, text: 'РеТрейд',
        margin: extjsf.dpts(0, 6, 0, 0), height: 30,
        componentCls: 'retrade-button-22pt',
        iconCls: 'retrade-main-icon',
        arrowVisible: false

      </f:facet>

      <x:menu coid = "${z:vid(localView, 'retrade-main-menu')}">

        <f:facet name = "extjs-props">
          showSeparator: false
        </f:facet>

        <x:component coid = "${z:vid(localView, 'retrade-main-menu-docs')}">

          <f:facet name = "extjs-props">
            text: 'Основные документы', xtype: 'menuitem',
            disabled: ${not rootView.isSecure('view: documents')},
            iconCls: 'retrade-document-icon'
          </f:facet>
        </x:component>


        <x:component coid = "${z:vid(localView, 'retrade-main-menu-reprice-docs')}">

          <f:facet name = "extjs-props">
            text: 'Документы изменения цен', xtype: 'menuitem',
            disabled: ${not rootView.isSecure('view: price change documents')},
            iconCls: 'retrade-price-delta-icon'
          </f:facet>
        </x:component>


        <x:component coid = "${z:vid(localView, 'retrade-main-menu-payments')}">

          <f:facet name = "extjs-props">
            text: 'Платёжные документы', xtype: 'menuitem',
            disabled: true || ${not rootView.isSecure('view: payments')},
            iconCls: 'retrade-payment-icon'
          </f:facet>
        </x:component>


        <x:component coid = "${z:vid(localView, 'retrade-main-menu-my-reports')}">

          <f:facet name = "extjs-props">
            text: 'Мои отчёты', xtype: 'menuitem',
            iconCls: 'retrade-reports-icon'
          </f:facet>
        </x:component>


        <x:component coid = "${z:vid(localView, 'retrade-main-menu-settings')}">

          <f:facet name = "extjs-props">
            text: 'Настройки', xtype: 'menuitem', hideOnClick: false,
            iconCls: 'retrade-settings-icon'
          </f:facet>

          <x:menu coid = "${z:vid(localView, 'retrade-main-menu-settings-menu')}">

            <f:facet name = "extjs-props">
              showSeparator: false
            </f:facet>


            <!-- [good attributes ]-->
            <x:component coid = "${z:vid(localView, 'retrade-main-menu-good-attrs')}">

              <f:facet name = "extjs-props">
                text: 'Атрибуты товаров', xtype: 'menuitem',
                iconCls: 'retrade-good-attrs-icon'
              </f:facet>
            </x:component>

            <x:component coid = "${z:vid(localView, 'retrade-main-menu-datas')}">

              <f:facet name = "extjs-props">
                text: 'Данные и отчёты', xtype: 'menuitem',
                iconCls: 'retrade-reports-icon'
              </f:facet>
            </x:component>

            <x:component coid = "${z:vid(localView, 'retrade-main-menu-settings-users')}">

              <f:facet name = "extjs-props">
                text: 'Пользователи', xtype: 'menuitem',
                disabled: ${not rootView.isSecure('secure: view: auth logins')},
                iconCls: 'retrade-user-icon'
              </f:facet>
            </x:component>

            <x:component coid = "${z:vid(localView, 'retrade-main-menu-settings-secure-rules')}">

              <f:facet name = "extjs-props">
                text: 'Правила доступа', xtype: 'menuitem',
                disabled: ${not rootView.isSecure('secure: view: rules')},
                iconCls: 'retrade-secrule-icon'
              </f:facet>
            </x:component>

            <x:component coid = "${z:vid(localView, 'retrade-main-menu-settings-secure-sets')}">

              <f:facet name = "extjs-props">
                text: 'Множества правил', xtype: 'menuitem',
                disabled: ${not rootView.isSecure('secure: view: sets')},
                iconCls: 'retrade-secset-icon'
              </f:facet>
            </x:component>
          </x:menu>
        </x:component>
      </x:menu>
    </x:component>

    <!-- retrade main menu] -->


    <!-- [catalogues menu -->

    <x:component coid = "${z:vid(localView, 'retrade-catalogues-menu-button')}">

      <f:facet name = "extjs-props">
        xtype: 'button', flex: 0, text: 'Справочники',
        margin: extjsf.dpts(0, 6, 0, 0), height: 30,
        iconCls: 'retrade-catalogues-icon',
        componentCls: 'retrade-button-22pt',
        arrowVisible: false
      </f:facet>

      <x:menu coid = "${z:vid(localView, 'retrade-catalogues-menu')}">

        <f:facet name = "extjs-props">
          showSeparator: false
        </f:facet>


        <x:component coid = "${z:vid(localView, 'retrade-main-menu-goods-nav')}">
          <f:facet name = "extjs-props">

            text: 'Товары', xtype: 'menuitem',
            iconCls: 'retrade-goods-icon',
            disabled: ${not rootView.isSecure('view: goods')}

          </f:facet>
        </x:component>


        <x:component coid = "${z:vid(localView, 'retrade-main-menu-goods')}">
          <f:facet name = "extjs-props">

            text: 'Товары, склады, цены', xtype: 'menuitem',
            iconCls: 'retrade-good-store-icon',
            disabled: ${not rootView.isSecure('view: goods')}

          </f:facet>
        </x:component>


        <x:component coid = "${z:vid(localView, 'retrade-main-menu-goods-tree')}">
          <f:facet name = "extjs-props">

            text: 'Категории товаров', xtype: 'menuitem',
            iconCls: 'retrade-goods-tree-icon',
            disabled: ${not rootView.isSecure('view: goods')}

          </f:facet>
        </x:component>


        <x:component coid = "${z:vid(localView, 'retrade-main-menu-goods-measures')}">
          <f:facet name = "extjs-props">

            text: 'Единицы измерения', xtype: 'menuitem',
            iconCls: 'retrade-measure-icon',
            disabled: ${not rootView.isSecure('view: goods')}

           </f:facet>
        </x:component>


        <x:component coid = "${z:vid(localView, 'retrade-main-menu-trade-stores')}">
          <f:facet name = "extjs-props">

            text: 'Склады', xtype: 'menuitem',
            iconCls: 'retrade-trade-store-icon',
            disabled: ${not rootView.isSecure('view: stores')}

           </f:facet>
        </x:component>


        <x:component coid = "${z:vid(localView, 'retrade-main-menu-firms')}">

          <f:facet name = "extjs-props">
            text: 'Контрагенты', xtype: 'menuitem',
            disabled: ${not rootView.isSecure('view: contractors')},
            iconCls: 'retrade-contractor-icon'
          </f:facet>
        </x:component>


        <x:component coid = "${z:vid(localView, 'retrade-main-menu-price-lists')}">
          <f:facet name = "extjs-props">

            text: 'Прайс-листы', xtype: 'menuitem',
            iconCls: 'retrade-prices-icon',
            disabled: ${not rootView.isSecure('view: price-lists')}

           </f:facet>
        </x:component>


        <x:component coid = "${z:vid(localView, 'retrade-main-menu-firms-price-lists')}">
          <f:facet name = "extjs-props">

            text: 'Прайс-листы контрагентов', xtype: 'menuitem',
            iconCls: 'retrade-prices-icon'

           </f:facet>
        </x:component>


        <x:component coid = "${z:vid(localView, 'retrade-main-menu-accounts')}">

          <f:facet name = "extjs-props">
            text: 'Учётные счета', xtype: 'menuitem',
            disabled: true || ${not rootView.isSecure('view: accounts')},
            iconCls: 'retrade-accounts-sum-icon'
          </f:facet>
        </x:component>


        <x:component coid = "${z:vid(localView, 'retrade-main-menu-pay-ways')}">

          <f:facet name = "extjs-props">
            text: 'Платёжные счета', xtype: 'menuitem',
            disabled: true || ${not rootView.isSecure('view: accounts')},
            iconCls: 'retrade-accounts-pay-icon'
          </f:facet>
        </x:component>

      </x:menu>
    </x:component>

    <!-- catalogues menu] -->


    <!-- [create document menu -->

    <x:component coid = "${z:vid(localView, 'retrade-create-doc-menu-button')}">

      <f:facet name = "extjs-props">
        xtype: 'button', flex: 0, height: 30,
        text: 'Создать', componentCls: 'retrade-button-22pt',
        iconCls: 'retrade-issue-plus-icon',
        arrowVisible: false
      </f:facet>

      <x:menu coid = "${z:vid(localView, 'retrade-create-doc-menu')}">

        <f:facet name = "extjs-props">
          showSeparator: false
        </f:facet>

        <x:component coid = "${z:vid(localView, 'retrade-create-doc-invoice-buy')}">

          <f:facet name = "extjs-props">
            text: 'Накладную закупки', xtype: 'menuitem',
            disabled: ${not rootView.isSecure('create: invoice: buy')},
            iconCls: 'retrade-listpad-plus-icon'
          </f:facet>
        </x:component>

        <x:component coid = "${z:vid(localView, 'retrade-create-doc-invoice-sell')}">

          <f:facet name = "extjs-props">
            text: 'Накладную продажи', xtype: 'menuitem',
            disabled: ${not rootView.isSecure('create: invoice: sell')},
            iconCls: 'retrade-listpad-minus-icon'
          </f:facet>
        </x:component>

        <x:component coid = "${z:vid(localView, 'retrade-create-doc-invoice-move')}">

          <f:facet name = "extjs-props">
            text: 'Накладную перемещения', xtype: 'menuitem',
            disabled: ${not rootView.isSecure('create: invoice: move')},
            iconCls: 'retrade-listpad-arrow-icon'
          </f:facet>
        </x:component>

        <x:component coid = "${z:vid(localView, 'retrade-create-doc-invoice-auto-produce')}">

          <f:facet name = "extjs-props">
            text: 'Накладную авто-производства', xtype: 'menuitem',
            iconCls: 'retrade-listpad-bottle-red-icon'
          </f:facet>
        </x:component>

        <x:component coid = "${z:vid(localView, 'retrade-create-doc-invoice-free-produce')}">

          <f:facet name = "extjs-props">
            text: 'Накладную производства', xtype: 'menuitem',
            iconCls: 'retrade-listpad-bottle-blue-icon'
          </f:facet>
        </x:component>

        <x:component coid = "${z:vid(localView, 'retrade-create-doc-volume-check')}">
          <f:facet name = "extjs-props">
            text: 'Инвентаризацию остатков', xtype: 'menuitem',
            iconCls: 'retrade-listpad-exclaim'
          </f:facet>
        </x:component>

        <x:component coid = "${z:vid(localView, 'retrade-create-doc-invoice-correction')}">

          <f:facet name = "extjs-props">
            text: 'Накладную корректировки', xtype: 'menuitem',
            iconCls: 'retrade-listpad-delta-icon'
          </f:facet>
        </x:component>

        <x:component coid = "${z:vid(localView, 'retrade-create-reprice-doc')}">

          <f:facet name = "extjs-props">
            text: 'Документ изменения цен', xtype: 'menuitem',
            disabled: ${not rootView.isSecure('create: price change document')},
            iconCls: 'retrade-price-delta-icon'
          </f:facet>
        </x:component>
      </x:menu>
    </x:component>

    <!-- create document menu] -->


    <!-- [my links button] -->
    <x:component coid = "${z:vid(localView, 'retrade-main-menu-my-links')}">

      <f:facet name = "extjs-props">
        xtype: 'button', text: 'Ссылки',
        margin: extjsf.dpts(0, 0, 0, 6),
        height: 30, iconCls: 'retrade-my-links',
        componentCls: 'retrade-button-22pt'
      </f:facet>
    </x:component>


    <!-- [topbar extention point -->


    <x:component coid = "${z:vid(localView, 'main_topbar_ext')}">
      <f:facet name = "extjs-props">

        border: false, frame: false, flex: 1,
        bodyCls: 'retrade-transparent-panel',
        layout: {type: 'hbox', align: 'middle'}

      </f:facet>
    </x:component>


    <!-- topbar extention point] -->


    <!-- [right controls block -->

    <x:component coid = "${z:vid(localView, 'desktop-topbar-right-block')}">
      <f:facet name = "extjs-props">

        border: false, frame: false,
        bodyPadding: 0, margin: 0, height: 35,
        bodyCls: 'retrade-transparent-panel',
        layout: {type: 'hbox', align: 'middle'}

      </f:facet>




    </x:component>
  </x:component>

  <!-- application main topbar] -->


  <!-- [topbar scripts -->

  <script type = "text/javascript">

    //~: attach top bar panel to the desktop
    ReTrade.desktop.controller('center').mainTopbar(
      "${z:vid(localView, 'main_topbar')}", '${rootView.extjsDomain}')


  </script>

  <!-- topbar scripts] -->

</ui:component>